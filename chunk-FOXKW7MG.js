import{b as Q,d as V}from"./chunk-TWETPHYG.js";import{a as Z,b as ee,c as te}from"./chunk-W5BJLJAG.js";import{a as W}from"./chunk-7R6EXMM5.js";import"./chunk-LWZDSZ7I.js";import{d as X,l as H}from"./chunk-GUJQPU3W.js";import{a as Y}from"./chunk-CJEHABRL.js";import{e as q,j as F,k as U,ka as J,la as K}from"./chunk-PCVNYECP.js";import{Ab as u,Ba as S,Bb as p,Db as L,Dc as x,Eb as A,Fb as w,Gb as h,Gc as B,Hb as a,Ib as o,Jb as b,Q as P,Ta as k,Ua as T,Ub as C,Xa as r,Y as s,Yb as j,_b as m,gc as N,ha as y,hc as z,kb as I,mc as c,nc as _,o as O,oa as g,oc as $,ra as v,wc as G,yb as R,zb as D}from"./chunk-EICM4YS7.js";function ne(n,t){let i=!t?.manualCleanup?t?.injector?.get(y)??s(y):null,l=oe(t?.equal),f;t?.requireSync?f=g({kind:0},{equal:l}):f=g({kind:1,value:t?.initialValue},{equal:l});let M,E=n.subscribe({next:d=>f.set({kind:1,value:d}),error:d=>{f.set({kind:2,error:d}),M?.()},complete:()=>{M?.()}});if(t?.requireSync&&f().kind===0)throw new P(601,!1);return M=i?.onDestroy(E.unsubscribe.bind(E)),x(()=>{let d=f();switch(d.kind){case 1:return d.value;case 2:throw d.error;case 0:throw new P(601,!1)}},{equal:t?.equal})}function oe(n=Object.is){return(t,e)=>t.kind===1&&e.kind===1&&n(t.value,e.value)}var re=["headline"],ae=()=>[1,2,3,4,5],le=(n,t)=>t.slug;function ce(n,t){n&1&&b(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",11)(4,"div",11)(5,"div",11)(6,"div",11)(7,"div",9)(8,"div",12)}function se(n,t){n&1&&(a(0,"article",7),A(1,ce,9,0,null,null,L),o()),n&2&&(r(),w(G(0,ae)))}function me(n,t){if(n&1&&(a(0,"span",21)(1,"time",22),c(2),o()()),n&2){let e=m(2);r(),R("datetime",e.date),r(),_(e.date)}}function de(n,t){if(n&1&&(a(0,"div",16)(1,"span",20)(2,"mat-icon"),c(3,"schedule"),o(),c(4),o(),u(5,me,3,2,"span",21),o()),n&2){let e=m(),i=m();r(4),$(" ",i.getReadingTimeText(e.readingTime)," "),r(),p(e.date?5:-1)}}function ge(n,t){if(n&1&&b(0,"img",24),n&2){let e=m(2);h("src",e.author.image,T)("alt",e.author.name)}}function ue(n,t){n&1&&(a(0,"div",25)(1,"mat-icon"),c(2,"account_circle"),o()())}function pe(n,t){if(n&1&&(a(0,"aside",18)(1,"div",23),u(2,ge,1,2,"img",24)(3,ue,3,0,"div",25),a(4,"div",26)(5,"h3",27),c(6),o(),a(7,"p",28),c(8),o(),a(9,"p",29),c(10),o()()()()),n&2){let e=m();r(2),p(e.author.image?2:3),r(4),_(e.author.name),r(2),_(e.author.title),r(2),_(e.author.bio)}}function _e(n,t){if(n&1&&b(0,"app-blog-article-card",32),n&2){let e=t.$implicit;h("article",e)}}function fe(n,t){if(n&1&&(a(0,"section",19)(1,"h2",30),C(2,2),o(),a(3,"div",31),A(4,_e,1,1,"app-blog-article-card",32,le),o()()),n&2){let e=m(2);r(4),w(e.similarArticles())}}function ve(n,t){if(n&1&&(a(0,"article",13)(1,"h1",14,0),c(3),o(),a(4,"p",15),c(5),o(),u(6,de,6,2,"div",16),a(7,"div",17),D("enter-slide-fade-animation"),o(),u(8,pe,11,4,"aside",18),o(),u(9,fe,6,0,"section",19)),n&2){let e=t,i=m();r(3),_(e.title||"Article non trouv\xE9"),r(2),_(e.summary||"Aucun r\xE9sum\xE9 disponible"),r(),p(e.readingTime?6:-1),r(),h("innerHTML",e.content,k),r(),p(e.author?8:-1),r(),p(i.similarArticles().length>0?9:-1)}}function he(n,t){n&1&&(a(0,"p",8),C(1,3),o())}var ie=class n{blogData=s(te);route=s(X);location=s(q);metaService=s(Y);readingTimeService=s(Z);platformId=s(S);slug=ne(this.route.paramMap.pipe(O(t=>t.get("slug"))),{initialValue:this.route.snapshot.paramMap.get("slug")});headline=B("headline");loading=g(!0);article=g(void 0);lastScrolledSlug=g(null);similarArticles=x(()=>{let t=this.article();return t?this.blogData.articles().filter(i=>i.slug!==t.slug).filter(i=>(t.similarSlugs??[]).includes(i.slug)).slice(0,3):[]});constructor(){this.blogData.loadArticles(),v(()=>{let t=this.slug(),e=this.blogData.articles();if(this.blogData.loading()||e.length===0){this.loading.set(!0);return}let l=t?this.blogData.getBySlug(t):void 0;this.loading.set(!0),setTimeout(()=>{this.article.set(l),this.loading.set(!1),l&&this.metaService.updateArticleMeta(l.title,l.summary)},500)}),v(()=>{let t=this.article(),e=this.slug(),i=this.headline();!t||!e||!i||!U(this.platformId)||this.lastScrolledSlug()!==e&&(this.lastScrolledSlug.set(e),queueMicrotask(()=>{requestAnimationFrame(()=>{i.nativeElement.scrollIntoView({behavior:"smooth",block:"start"})})}))})}goBack(){this.location.back()}getReadingTimeText(t){return this.readingTimeService.formatReadingTime(t)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=I({type:n,selectors:[["app-article-page"]],viewQuery:function(e,i){e&1&&N(i.headline,re,5),e&2&&z()},decls:9,vars:1,consts:()=>{let t;t=$localize`:Blog page|Back to blog link:Retour`;let e;e=$localize`:Blog page|Similar articles heading:Articles similaires`;let i;return i=$localize`:Blog page|Article not found error:Article introuvable`,[["headline",""],t,e,i,[1,"container","blog-page"],["mat-button","","aria-label","Revenir \xE0 la page pr\xE9c\xE9dente",1,"back-button",3,"click"],[2,"font-size","larger"],["aria-busy","true",1,"blog-post","article-skeleton"],[1,"mat-body-1"],[1,"skeleton-title"],[1,"skeleton-summary"],[1,"skeleton-line"],[1,"skeleton-line","short"],["itemscope","","itemtype","https://schema.org/BlogPosting",1,"blog-post"],["itemprop","headline",1,"mat-display-2"],["itemprop","description",1,"mat-headline-5"],[1,"article-meta"],["itemprop","articleBody",1,"blog-content",3,"innerHTML"],["itemprop","author","itemscope","","itemtype","https://schema.org/Person",1,"author-bio-section"],["aria-label","Articles similaires",1,"similar-articles"],[1,"reading-time-badge"],[1,"article-date"],["itemprop","datePublished"],[1,"author-bio-container"],["itemprop","image",1,"author-image",3,"src","alt"],[1,"author-avatar"],[1,"author-info"],["itemprop","name",1,"author-name"],["itemprop","jobTitle",1,"author-title"],["itemprop","description",1,"author-bio"],[1,"similar-title"],["animateText","fade",1,"similar-grid"],[3,"article"]]},template:function(e,i){if(e&1&&(a(0,"main",4)(1,"button",5),j("click",function(){return i.goBack()}),a(2,"mat-icon"),c(3,"arrow_back"),o(),a(4,"span",6),C(5,1),o()(),u(6,se,3,1,"article",7)(7,ve,10,6)(8,he,2,0,"p",8),o()),e&2){let l;r(6),p(i.loading()?6:(l=i.article())?7:8,l)}},dependencies:[F,H,V,Q,K,J,ee,W],styles:[".blog-page[_ngcontent-%COMP%]{padding-bottom:clamp(1rem,3vw,2.5rem)}.blog-page[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{margin-bottom:1.5rem}.blog-post[_ngcontent-%COMP%]{background:#fff;border-radius:clamp(.75rem,2vw,1.25rem);box-shadow:0 2px 12px #0000000f;padding:clamp(1rem,4vw,2.5rem);margin:0 auto clamp(1rem,3vw,2.5rem) auto;max-width:1200px;font-size:1.1rem}.blog-post[_ngcontent-%COMP%]     h1{color:var(--mat-button-filled-container-color);margin-top:2rem;margin-bottom:1rem;font-weight:600}.blog-content[_ngcontent-%COMP%]{text-align:justify}.blog-content[_ngcontent-%COMP%]     h2{color:var(--mat-button-filled-container-color);margin-top:2rem;margin-bottom:1rem;font-size:1.85rem;font-weight:600}.blog-content[_ngcontent-%COMP%]     p, .blog-content[_ngcontent-%COMP%]     li{line-height:1.5;margin-bottom:1rem}.mat-display-2[_ngcontent-%COMP%]{color:var(--mat-primary-color);margin-bottom:clamp(1rem,2vw,1.5rem);font-size:clamp(1.6rem,4.2vw,2.7rem)}.mat-headline-5[_ngcontent-%COMP%]{color:var(--mat-text-secondary-color);margin-bottom:clamp(.75rem,2vw,1.5rem);font-size:clamp(1.15rem,2.7vw,1.35rem)}.article-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:clamp(1rem,3vw,2rem);padding-bottom:clamp(.75rem,2vw,1rem);border-bottom:1px solid var(--mat-divider-color);flex-wrap:wrap}.reading-time-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.375rem .75rem;background:var(--mat-sys-surface-container-low);border-radius:1rem;font-size:.875rem;color:var(--mat-text-secondary-color)}.reading-time-badge[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1rem;width:1rem;height:1rem;line-height:1rem}.article-date[_ngcontent-%COMP%]{font-size:.875rem;color:var(--mat-text-secondary-color)}.author-bio-section[_ngcontent-%COMP%]{margin-top:clamp(2rem,4vw,3rem);padding:clamp(1.5rem,3vw,2rem);background:var(--mat-sys-surface-container-low);border-radius:clamp(.75rem,2vw,1rem);border:1px solid var(--mat-divider-color)}.author-bio-container[_ngcontent-%COMP%]{display:flex;gap:clamp(1rem,3vw,1.5rem);align-items:flex-start}.author-image[_ngcontent-%COMP%], .author-avatar[_ngcontent-%COMP%]{flex-shrink:0;width:clamp(80px,15vw,120px);height:clamp(80px,15vw,120px);border-radius:50%;object-fit:cover;background:var(--mat-sys-surface-variant);display:flex;align-items:center;justify-content:center}.author-image.author-image[_ngcontent-%COMP%], .author-avatar.author-image[_ngcontent-%COMP%]{border:2px solid var(--mat-primary-color)}.author-avatar[_ngcontent-%COMP%]{border:2px solid var(--mat-primary-color);color:var(--mat-primary-color)}.author-avatar[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:3rem;width:3rem;height:3rem;line-height:3rem}.author-info[_ngcontent-%COMP%]{flex:1;min-width:0}.author-name[_ngcontent-%COMP%]{margin:0 0 .25rem;font-size:clamp(1.1rem,2vw,1.3rem);font-weight:600;color:var(--mat-primary-color)}.author-title[_ngcontent-%COMP%]{margin:0 0 .75rem;font-size:.95rem;font-weight:500;color:var(--mat-text-secondary-color)}.author-bio[_ngcontent-%COMP%]{margin:0;font-size:.95rem;color:var(--mat-text-secondary-color);line-height:1.6}@media(max-width:600px){.author-bio-container[_ngcontent-%COMP%]{flex-direction:column;align-items:center;text-align:center}.author-image[_ngcontent-%COMP%], .author-avatar[_ngcontent-%COMP%]{width:80px;height:80px}.author-info[_ngcontent-%COMP%]{width:100%}}.article-skeleton[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;min-height:500px}.article-skeleton[_ngcontent-%COMP%]   .skeleton-title[_ngcontent-%COMP%], .article-skeleton[_ngcontent-%COMP%]   .skeleton-summary[_ngcontent-%COMP%], .article-skeleton[_ngcontent-%COMP%]   .skeleton-line[_ngcontent-%COMP%]{border-radius:.25rem;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite}.article-skeleton[_ngcontent-%COMP%]   .skeleton-title[_ngcontent-%COMP%]{height:clamp(1.5rem,3vw,2.25rem);width:75%}.article-skeleton[_ngcontent-%COMP%]   .skeleton-summary[_ngcontent-%COMP%]{height:clamp(1rem,2.5vw,1.5rem);width:95%}.article-skeleton[_ngcontent-%COMP%]   .skeleton-line[_ngcontent-%COMP%]{height:.9rem;width:100%}.article-skeleton[_ngcontent-%COMP%]   .skeleton-line.short[_ngcontent-%COMP%]{width:65%}.similar-articles[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.similar-title[_ngcontent-%COMP%]{font-size:clamp(1.1rem,3vw,1.5rem);font-weight:600;margin:0 0 1rem;color:var(--mat-primary-color)}.similar-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));grid-auto-rows:1fr;gap:clamp(1rem,3vw,1.5rem);align-items:stretch}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-200% 0}to{background-position:200% 0}}@media(max-width:1100px){.similar-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:1rem}}@media(max-width:400px){.container[_ngcontent-%COMP%]{padding:.5rem!important}.blog-post[_ngcontent-%COMP%]{padding:.5rem;margin:0 auto .5rem;border-radius:.5rem}.mat-display-2[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:1rem}.mat-headline-5[_ngcontent-%COMP%]{font-size:.9rem;margin-bottom:.5rem}}"]})};export{ie as ArticlePage};
