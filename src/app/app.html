<div class="app-container">
	<!-- Skip-to-content link for keyboard users -->
	<a href="#main-content" class="skip-link" i18n="Accessibility|Skip to main content"> Aller au contenu principal </a>

	<!-- Navigation -->
	<mat-toolbar class="app-toolbar">
		<span routerLink="/" routerLinkActive="active-link" class="logo">{{ config.businessNameShort }}</span>
		<span class="spacer"></span>
		<nav>
			<a
				mat-button
				routerLink="/"
				routerLinkActive="active-link"
				[routerLinkActiveOptions]="{ exact: true }"
				i18n="Navigation|Home menu item"
				>Accueil</a
			>
			<a mat-button routerLink="/prestations" routerLinkActive="active-link" i18n="Navigation|Services menu item"
				>Nos Prestations</a
			>
			<a mat-button routerLink="/blog" routerLinkActive="active-link" i18n="Navigation|Blog menu item">Blog</a>
			<a mat-button routerLink="/a-propos" routerLinkActive="active-link" i18n="Navigation|About menu item"
				>À Propos</a
			>
			<a routerLink="/contact" routerLinkActive="active-link" mat-flat-button i18n="Navigation|Contact menu item">
				Contact
			</a>
		</nav>
		<div class="language-switch">
			<button
				mat-icon-button
				(click)="toggleDarkMode()"
				[attr.aria-label]="darkMode() ? 'Activer le mode clair' : 'Activer le mode sombre'"
				class="theme-toggle"
				[matTooltip]="darkMode() ? 'Mode clair' : 'Mode sombre'"
			>
				<mat-icon>{{ darkMode() ? 'light_mode' : 'dark_mode' }}</mat-icon>
			</button>
			<button
				mat-icon-button
				(click)="resetPreferences()"
				aria-label="Réinitialiser les préférences"
				class="reset-preferences"
				[matTooltip]="'Réinitialiser les préférences'"
				i18n-aria-label="Navigation|Reset preferences button"
			>
				<mat-icon>restart_alt</mat-icon>
			</button>
			<mat-form-field
				appearance="outline"
				[matTooltip]="'Choisir la langue'"
				aria-label="Select language tooltip"
			>
				<mat-label i18n="Navigation|Language selector label">Langue</mat-label>
				<mat-select
					[value]="currentLanguage()"
					(selectionChange)="changeLanguage($event.value)"
					aria-label="Select language"
				>
					<mat-option value="fr">Français</mat-option>
					<mat-option value="en">English</mat-option>
				</mat-select>
			</mat-form-field>
		</div>
	</mat-toolbar>

	<!-- ARIA live region for page loading announcements -->
	<div class="sr-only" aria-live="polite" aria-atomic="true" role="status">{{ getLoadingMessage() }}</div>

	<!-- Main Content -->
	<main id="main-content" class="content-wrapper" [@routeAnimations]="getRouteAnimationData()">
		@if (isLoading()) {
		<app-skeleton-loader></app-skeleton-loader>
		} @else {
		<router-outlet></router-outlet>
		}
	</main>

	@if (scrolledDown()) {
	<button
		mat-fab
		class="scroll-top-btn"
		i18n-aria-label="Scroll to top button|Aria label"
		aria-label="Revenir en haut de la page"
		matTooltip="Revenir en haut"
		i18n-matTooltip="Scroll to top button|Tooltip"
		(click)="scrollToTop()"
	>
		<mat-icon>north</mat-icon>
	</button>
	}

	<!-- Footer -->
	<footer class="app-footer">
		<div class="footer-theme-select">
			<mat-form-field appearance="outline">
				<mat-label i18n="Footer|Theme selector label">Thème</mat-label>
				<mat-select
					[value]="colorTheme()"
					(selectionChange)="onThemeSelect($event.value)"
					[matTooltip]="'Choisir le thème'"
					i18n-aria-label="Footer|Theme selector aria label"
					aria-label="Choisir le thème"
				>
					<mat-option value="red" i18n="Theme colors|Red">Rouge</mat-option>
					<mat-option value="blue" i18n="Theme colors|Blue">Bleu</mat-option>
					<mat-option value="green" i18n="Theme colors|Green">Vert</mat-option>
					<mat-option value="yellow" i18n="Theme colors|Yellow">Jaune</mat-option>
					<mat-option value="magenta" i18n="Theme colors|Magenta">Magenta</mat-option>
					<mat-option value="orange" i18n="Theme colors|Orange">Orange</mat-option>
					<mat-option value="azure" i18n="Theme colors|Azure">Azur</mat-option>
					<mat-option value="violet" i18n="Theme colors|Violet">Violet</mat-option>
					<mat-option value="rose" i18n="Theme colors|Rose">Rose</mat-option>
				</mat-select>
			</mat-form-field>
			<mat-form-field
				appearance="outline"
				class="footer-language-select"
				[matTooltip]="'Choisir la langue'"
				aria-label="Select language tooltip"
			>
				<mat-label i18n="Footer|Language selector label">Langue</mat-label>
				<mat-select
					[value]="currentLanguage()"
					(selectionChange)="changeLanguage($event.value)"
					aria-label="Select language"
				>
					<mat-option value="fr">Français</mat-option>
					<mat-option value="en">English</mat-option>
				</mat-select>
			</mat-form-field>
		</div>
		<button
			mat-icon-button
			(click)="toggleDarkMode()"
			[attr.aria-label]="darkMode() ? 'Activer le mode clair' : 'Activer le mode sombre'"
			[matTooltip]="darkMode() ? 'Mode clair' : 'Mode sombre'"
			class="theme-toggle theme-switch"
			i18n-matTooltip="Navigation|Theme toggle tooltip"
		>
			<mat-icon>{{ darkMode() ? 'light_mode' : 'dark_mode' }}</mat-icon>
		</button>
		<button
			mat-icon-button
			(click)="resetPreferences()"
			aria-label="Réinitialiser les préférences"
			[matTooltip]="'Réinitialiser les préférences'"
			class="reset-preferences theme-switch"
			i18n-aria-label="Footer|Reset preferences button"
			i18n-matTooltip="Footer|Reset preferences tooltip"
		>
			<mat-icon>restart_alt</mat-icon>
		</button>
		<p i18n="Footer|Copyright notice">
			© 2026 {{ config.businessNameShort }} - {{ config.lawyer.specialties[0] }}.
		</p>
		<p i18n="Footer|Office address">Bureau : {{ config.address.full }}</p>
		<div class="footer-links">
			<a
				mat-button="link"
				[routerLink]="'/mentions-legales'"
				routerLinkActive="active"
				i18n="Footer|Legal mentions link"
				>Mentions légales</a
			>
			<a
				mat-button="link"
				[routerLink]="'/politique-confidentialite'"
				routerLinkActive="active"
				i18n="Footer|Privacy policy link"
				>Politique de confidentialité</a
			>
		</div>
	</footer>

	<!-- Chat Widget (French only) -->
	@if (currentLanguage() === 'fr') {
	<app-chat-widget></app-chat-widget>
	}
</div>
