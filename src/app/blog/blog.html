<main class="container blog-page">
	<header class="page-header">
		<h1 class="mat-display-2" i18n="Blog page|Page title">Blog</h1>
		<p class="mat-headline-5" animateText="fade" i18n="Blog page|Page subtitle">
			Actualités et conseils en droit des étrangers
		</p>
	</header>

	<section #filtersSection class="blog-filters">
		<mat-form-field appearance="outline" class="filter-field">
			<mat-label i18n="Blog page|Search label">Rechercher</mat-label>
			<input
				matInput
				type="text"
				[value]="searchText()"
				(input)="onSearchChange($event)"
				(keydown.enter)="$any($event.target).blur()"
				placeholder="Titre, résumé, catégorie..."
				i18n-placeholder="Blog page|Search placeholder"
			/>
		</mat-form-field>

		<mat-form-field appearance="outline" class="filter-field">
			<mat-label i18n="Blog page|Category filter label">Filtrer par catégorie</mat-label>
			<mat-select [value]="selectedCategory()" (selectionChange)="onCategoryChange($event.value)">
				<mat-option value="all" i18n="Blog page|All categories option">Toutes</mat-option>
				@for (category of categories(); track category) {
				<mat-option [value]="category">{{ category }}</mat-option>
				}
			</mat-select>
		</mat-form-field>
	</section>

	<section class="blog-list">
		<div class="blog-cards">
			@if (loading()) { @for (item of [1, 2, 3]; track item) {
			<div class="blog-card-skeleton">
				<div class="skeleton-image"></div>
				<div class="skeleton-title"></div>
				<div class="skeleton-text"></div>
				<div class="skeleton-text short"></div>
			</div>
			} } @else { @for (article of articles(); track article.slug) {
			<app-blog-article-card
				animateOnEnter="fade"
				animate.enter="enter-slide-fade-animation"
				[article]="article"
			/>
			} }
		</div>
		@if (!articles().length && !loading()) {
		<p class="mat-body-1" animateText="fade" i18n="Blog page|No articles message">Aucun article disponible.</p>
		}
	</section>
</main>
