<div class="container services-page">
	@if (zoomedCardIndex() !== null) {
	<div class="overlay" (click)="onCardClick(zoomedCardIndex()!)" role="button" tabindex="0"></div>
	}
	<header class="page-header">
		<h1 class="mat-display-2">{{ 'services.title' | translate }}</h1>
		<p class="mat-headline-5">{{ 'services.subtitle' | translate }}</p>
		<div class="view-toggle">
			<mat-slide-toggle [checked]="isGridView()" (change)="isGridView.set($event.checked)">
				{{ 'services.viewToggle' | translate }}
			</mat-slide-toggle>
		</div>
	</header>

	@if (isGridView()) {
	<div class="services-grid">
		@for (service of services; track service.titleKey; let i = $index) {
		<mat-card
			class="service-category-card"
			[class.zoomed]="zoomedCardIndex() === i"
			[attr.aria-label]="'Section ' + getServiceTitle(service)"
			id="{{ service.anchor }}"
			(click)="onCardClick(i)"
			role="button"
			tabindex="0"
			animateText="fade"
		>
			<mat-card-header>
				<mat-icon mat-card-avatar>{{ service.icon }}</mat-icon>
				<mat-card-title>{{ getServiceTitle(service) }}</mat-card-title>
				@if (getServiceSubtitle(service)) {
				<mat-card-subtitle>{{ getServiceSubtitle(service) }}</mat-card-subtitle>
				}
			</mat-card-header>
			<mat-card-content>
				@if (getServiceDetailedDescription(service)) {
				<p>{{ getServiceDetailedDescription(service) }}</p>
				} @if (getServiceItems(service) && getServiceItems(service)!.length > 0) {
				<ul class="list">
					@for (item of getServiceItems(service); track item) {
					<li class="list-item">{{ item }}</li>
					}
				</ul>
				}
			</mat-card-content>
		</mat-card>
		}
	</div>
	} @else {
	<mat-tab-group class="services-tabs">
		@for (service of services; track service.titleKey) {
		<mat-tab>
			<ng-template mat-tab-label>
				<mat-icon class="mat-tab-icon">{{ service.icon }}</mat-icon>
				{{ getServiceTitle(service) }}
			</ng-template>
			<div class="tab-content">
				<h2 class="mat-headline-4">{{ getServiceTitle(service) }}</h2>
				@if (getServiceSubtitle(service)) {
				<p class="mat-headline-6 subtitle">{{ getServiceSubtitle(service) }}</p>
				} @if (getServiceDetailedDescription(service)) {
				<p class="description">{{ getServiceDetailedDescription(service) }}</p>
				} @if (getServiceItems(service) && getServiceItems(service)!.length > 0) {
				<ul class="list">
					@for (item of getServiceItems(service); track item) {
					<li class="list-item">{{ item }}</li>
					}
				</ul>
				}
			</div>
		</mat-tab>
		}
	</mat-tab-group>
	}

	<section class="cta-section text-center">
		<h2 class="mat-headline-4">{{ 'services.cta.title' | translate }}</h2>
		<p>{{ 'services.cta.description' | translate }}</p>
		<a mat-flat-button routerLink="/contact" class="cta-button">{{ 'services.cta.button' | translate }}</a>
	</section>
</div>
