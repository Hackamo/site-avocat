@use '@angular/material' as mat;
@use './app/styles/theme-colors' as theme;

@include mat.core();

$avocat-red-theme: mat.define-theme(
	(
		color: (
			theme-type: light,
			primary: theme.$primary-palette,
			tertiary: theme.$tertiary-palette,
		),
		typography: (
			brand-family: "'Playfair Display', Lato",
			plain-family: "'Playfair Display', Lato",
			bold-weight: 800,
			medium-weight: 500,
			regular-weight: 300,
		),
		density: (
			scale: maximum,
		),
	)
);

$avocat-blue-theme: mat.define-theme(
	(
		color: (
			theme-type: light,
			primary: theme.$blue-primary-palette,
			tertiary: theme.$tertiary-palette,
		),
		typography: (
			brand-family: "'Playfair Display', Lato",
			plain-family: "'Playfair Display', Lato",
			bold-weight: 800,
			medium-weight: 500,
			regular-weight: 300,
		),
		density: (
			scale: maximum,
		),
	)
);

$avocat-dark-theme: mat.define-theme(
	(
		color: (
			theme-type: dark,
			primary: theme.$primary-palette,
			tertiary: theme.$tertiary-palette,
		),
		typography: (
			brand-family: "'Playfair Display', serif",
			plain-family: "'Lato', sans-serif",
			bold-weight: 800,
			medium-weight: 500,
			regular-weight: 300,
		),
		density: (
			scale: maximum,
		),
	)
);

// Scope theme colors by body class for runtime switching
.theme-blue {
	@include mat.all-component-themes($avocat-blue-theme);

	// Ensure card borders follow blue primary in light mode
	.mat-mdc-card {
		border: 1px solid var(--mat-sys-primary) !important;
	}

	// Override residual red-tinted card surfaces with blue-neutral tones
	--mat-card-elevated-container-color: #f5f9ff !important; // light blue surface
	--mat-card-container-color: #fbfdff !important; // near-white with blue tint
	--mat-card-outlined-container-color: #f5f9ff !important; // light blue surface
	--mat-toolbar-container-background-color: #f5f9ff !important;
	--mat-divider-color: #d0e4ff !important;
	--mat-select-panel-background-color: #f5f9ff !important;

	@include mat.snack-bar-overrides(
		(
			// Blue snackbar styling
			container-color: #1e88e5,
			supporting-text-color: #ffffff
		)
	);
}

.theme-red {
	@include mat.all-component-themes($avocat-red-theme);
}

body.dark-theme {
	@include mat.all-component-colors($avocat-dark-theme);
	background: #1a1a1a;
	color: #e8e8e8;

	// Override Material color tokens for better contrast
	--mat-sys-surface: #1a1a1a;
	--mat-sys-surface-container: #242424;
	--mat-sys-surface-container-high: #2e2e2e;
	--mat-sys-surface-container-highest: #383838;
	--mat-sys-on-surface: #e8e8e8;
	--mat-sys-on-surface-variant: #d0d0d0;
	--mat-sys-outline: #666666;
	--mat-sys-outline-variant: #444444;
	--mat-tab-divider-color: #ffd740 !important;
	--mat-tab-active-indicator-color: #ffd740 !important;

	// Complete slide toggle override - all yellow in selected state
	--mat-slide-toggle-selected-track-color: #666666 !important;
	--mat-slide-toggle-selected-handle-color: #666666 !important;
	--mat-slide-toggle-selected-hover-track-color: #666666 !important;
	--mat-slide-toggle-selected-hover-handle-color: #666666 !important;
	--mat-slide-toggle-selected-focus-track-color: #666666 !important;
	--mat-slide-toggle-selected-focus-handle-color: #666666 !important;
	--mat-slide-toggle-selected-pressed-track-color: #666666 !important;
	--mat-slide-toggle-selected-pressed-handle-color: #666666 !important;

	// Unselected state - grey tones
	--mat-slide-toggle-unselected-track-color: #666666 !important;
	--mat-slide-toggle-unselected-handle-color: #999999 !important;
	--mat-slide-toggle-unselected-hover-track-color: #666666 !important;
	--mat-slide-toggle-unselected-hover-handle-color: #999999 !important;
	--mat-slide-toggle-unselected-focus-track-color: #666666 !important;
	--mat-slide-toggle-unselected-focus-handle-color: #999999 !important;
	--mat-slide-toggle-unselected-pressed-track-color: #666666 !important;
	--mat-slide-toggle-unselected-pressed-handle-color: #999999 !important;
	--mat-slide-toggle-unselected-focus-state-layer-color: #666666 !important;
	--mat-slide-toggle-unselected-hover-state-layer-color: #666666 !important;
	--mat-slide-toggle-unselected-pressed-state-layer-color: #666666 !important;

	// Track outline
	--mat-slide-toggle-track-outline-color: transparent !important;
	--mat-slide-toggle-selected-track-outline-color: transparent !important;
	--mat-slide-toggle-unselected-track-outline-color: transparent !important;

	// State layer opacity
	--mat-slide-toggle-state-layer-size: 40px !important;
	--mat-slide-toggle-label-text-color: #e8e8e8 !important;

	mat-icon,
	.mat-icon {
		vertical-align: middle !important;
		display: inline-flex !important;
		align-items: center !important;
		justify-content: center !important;
	}

	// Remove hover effect from theme toggle
	.theme-toggle {
		&:hover {
			background-color: transparent !important;
			box-shadow: none !important;
			transform: none !important;
			transition: none !important;
		}
	}

	// Better contrast for cards and containers
	.mat-mdc-card {
		background: #242424;
		color: #e8e8e8;
		border: 1px solid var(--mat-sys-primary) !important;
	}

	// Card subtitles
	.mat-mdc-card-subtitle,
	mat-card-subtitle {
		color: #d0d0d0 !important;
	}

	// Yellow tabs in dark mode
	.mat-mdc-tab-group {
		border-bottom-color: #ffd740 !important;
	}

	.mat-mdc-tab:not(.mat-mdc-tab-disabled) {
		--mdc-tab-indicator-active-indicator-color: #ffd740;
		--mat-tab-header-active-label-text-color: #ffd740;
		--mat-tab-header-active-focus-label-text-color: #ffd740;
		--mat-tab-header-active-hover-label-text-color: #ffd740;
		--mat-tab-header-inactive-label-text-color: #ffffff;
		--mat-tab-header-inactive-focus-label-text-color: #ffffff;
		--mat-tab-header-inactive-hover-label-text-color: #ffffff;

		.mdc-tab__text-label,
		.mat-mdc-tab-link,
		.mat-icon {
			color: #ffffff;
		}

		&.mdc-tab--active {
			.mdc-tab__text-label,
			.mat-icon {
				color: #ffd740;
			}
		}
	}

	// Full yellow toggle in dark mode (all states)
	.mat-mdc-slide-toggle {
		--mdc-switch-selected-track-color: #ffd740 !important;
		--mdc-switch-selected-handle-color: #ffd740 !important;
		--mdc-switch-selected-hover-track-color: #ffd740 !important;
		--mdc-switch-selected-focus-track-color: #ffd740 !important;
		--mdc-switch-selected-pressed-track-color: #ffd740 !important;
		--mdc-switch-selected-hover-handle-color: #ffd740 !important;
		--mdc-switch-selected-focus-handle-color: #ffd740 !important;
		--mdc-switch-selected-pressed-handle-color: #ffd740 !important;
		--mdc-switch-unselected-track-color: rgba(255, 215, 64, 0.3) !important;
		--mdc-switch-unselected-handle-color: #ffd740 !important;

		.mdc-switch__handle::after {
			background: #ffd740 !important;
		}

		.mdc-switch__track {
			background-color: #ffd740 !important;
			border-color: #ffd740 !important;
		}
	}

	// Improved text contrast
	h1,
	h2,
	h3,
	h4,
	h5,
	h6 {
		color: #ffc400;
	}

	p,
	span,
	li {
		color: #e8e8e8;
	}

	a {
		color: #ffd740;

		&:hover {
			color: #ffc400;
		}
	}

	// Better toolbar contrast
	.app-toolbar {
		background: #242424;
		border-bottom: 1px solid #383838;
	}

	// Better footer contrast
	.app-footer {
		background: #242424;
		border-top: 1px solid #383838;
	}

	// Form elements with yellow theme
	.mat-mdc-form-field {
		--mat-form-field-focus-color: #ffca28 !important;
		--mat-form-field-hover-color: #ffd740 !important;
		--mdc-outlined-text-field-outline-color: rgba(255, 202, 40, 0.5) !important;
		--mdc-outlined-text-field-hover-outline-color: rgba(255, 202, 40, 0.7) !important;
		--mdc-outlined-text-field-focus-outline-color: #ffca28 !important;
		--mdc-outlined-text-field-disabled-outline-color: #666666 !important;
		--mat-form-field-outline-color: rgba(255, 202, 40, 0.5) !important;
		--mat-form-field-hover-outline-color: rgba(255, 202, 40, 0.7) !important;
	}

	.mat-mdc-text-field-wrapper {
		background-color: #1a1a1a !important;
	}

	.mat-mdc-form-field-focus-overlay {
		background-color: rgba(255, 202, 40, 0.08) !important;
	}

	.mat-mdc-input-element,
	.mat-mdc-select,
	.mat-mdc-select-value,
	textarea {
		color: #e8e8e8 !important;
		caret-color: #ffca28 !important;

		&::placeholder {
			color: #ffffff !important;
			opacity: 0.7 !important;
		}
	}

	.mat-mdc-form-field-label,
	.mat-mdc-floating-label {
		color: #d0d0d0 !important;

		&.mat-focused {
			color: #ffca28 !important;
		}
	}

	.mat-mdc-form-field-hint,
	.mat-mdc-form-field-error {
		color: #d0d0d0 !important;
	}

	.mat-mdc-form-field-error {
		color: #ff6b6b !important;
	}

	.mat-mdc-select-arrow {
		color: #ffca28 !important;
	}

	.mat-mdc-form-field.mat-focused {
		.mat-mdc-notched-outline-notch,
		.mat-mdc-notched-outline-leading,
		.mat-mdc-notched-outline-trailing {
			border-color: #ffca28 !important;
			border-width: 2px !important;
		}
	}

	.mat-mdc-notched-outline-notch,
	.mat-mdc-notched-outline-leading,
	.mat-mdc-notched-outline-trailing {
		border-color: rgba(255, 202, 40, 0.5) !important;
	}

	.mat-mdc-form-field:hover:not(.mat-focused) {
		.mat-mdc-notched-outline-notch,
		.mat-mdc-notched-outline-leading,
		.mat-mdc-notched-outline-trailing {
			border-color: rgba(255, 202, 40, 0.7) !important;
		}
	}

	// Force outline appearance yellow borders
	.mat-form-field-appearance-outline {
		.mat-form-field-outline {
			color: rgba(255, 202, 40, 0.5) !important;
		}

		&.mat-focused .mat-form-field-outline {
			color: #ffca28 !important;
		}

		&:hover:not(.mat-focused) .mat-form-field-outline {
			color: rgba(255, 202, 40, 0.7) !important;
		}
	}

	// MDC text field notch pieces - yellow borders
	.mdc-text-field--outlined:not(.mdc-text-field--disabled) {
		.mdc-notched-outline__leading,
		.mdc-notched-outline__notch,
		.mdc-notched-outline__trailing,
		.mat-mdc-notch-piece {
			border-color: rgba(255, 202, 40, 0.5) !important;
		}

		&:hover {
			.mdc-notched-outline__leading,
			.mdc-notched-outline__notch,
			.mdc-notched-outline__trailing,
			.mat-mdc-notch-piece {
				border-color: rgba(255, 202, 40, 0.7) !important;
			}
		}

		&.mdc-text-field--focused {
			.mdc-notched-outline__leading,
			.mdc-notched-outline__notch,
			.mdc-notched-outline__trailing,
			.mat-mdc-notch-piece {
				border-color: #ffca28 !important;
				border-width: 2px !important;
			}
		}
	}

	// Select dropdown
	.mat-mdc-select-panel {
		background: #242424 !important;
	}

	.mat-mdc-option {
		color: #e8e8e8 !important;

		&:hover,
		&.mat-mdc-option-active {
			background-color: rgba(255, 202, 40, 0.12) !important;
		}

		&.mat-selected {
			background-color: rgba(255, 202, 40, 0.2) !important;
			color: #ffca28 !important;
		}
	}

	// Yellow buttons in dark mode
	button,
	.mat-mdc-button,
	.mat-mdc-raised-button,
	.mat-mdc-flat-button,
	.mat-mdc-stroked-button {
		&:hover {
			box-shadow: 0 4px 12px rgba(255, 196, 0, 0.4);
		}
	}

	.mat-mdc-flat-button,
	.mat-mdc-raised-button,
	.mat-mdc-unelevated-button,
	button[mat-flat-button],
	button[mat-raised-button] {
		background-color: #ffca28 !important;
		color: #000000 !important;
		font-weight: 700 !important;

		&:hover {
			background-color: #ffd740 !important;
			color: #000000 !important;
			box-shadow: 0 6px 16px rgba(255, 202, 40, 0.5) !important;
		}

		&.mat-primary {
			background-color: #ffca28 !important;
			color: #000000 !important;
		}

		&:disabled {
			background-color: #666666 !important;
			color: #999999 !important;
		}

		// Ensure text and icons are black
		mat-icon,
		.mat-icon,
		span {
			color: #000000 !important;
		}
	}

	.mat-mdc-stroked-button,
	.mat-mdc-outlined-button,
	button[mat-stroked-button] {
		border-color: #ffca28 !important;
		border-width: 2px !important;
		color: #ffca28 !important;
		font-weight: 600 !important;

		&:hover {
			background-color: rgba(255, 202, 40, 0.15) !important;
			border-color: #ffd740 !important;
		}
	}

	.mat-mdc-button:not(.mat-mdc-flat-button):not(.mat-mdc-raised-button):not(.mat-mdc-stroked-button) {
		color: #ffca28 !important;
		font-weight: 600 !important;

		&:hover {
			background-color: rgba(255, 202, 40, 0.12) !important;
		}
	}

	// Icon buttons
	.mat-mdc-icon-button,
	button[mat-icon-button] {
		color: #ffca28 !important;

		&:hover {
			background-color: rgba(255, 202, 40, 0.12) !important;
		}
	}

	// FAB buttons
	.mat-mdc-fab,
	.mat-mdc-mini-fab,
	button[mat-fab],
	button[mat-mini-fab] {
		background-color: #ffca28 !important;
		color: #000000 !important;

		&:hover {
			background-color: #ffd740 !important;
			color: #000000 !important;
			box-shadow: 0 6px 16px rgba(255, 202, 40, 0.5) !important;
		}

		// Ensure icons are black
		mat-icon,
		.mat-icon {
			color: #000000 !important;
		}

		// Ensure span text is black
		span {
			color: #000000 !important;
		}
	}

	// Article page dark mode
	.blog-post {
		background: #242424;
		box-shadow: 0 2px 12px rgba(0, 0, 0, 0.4);

		h1,
		h2,
		h3,
		h4,
		h5,
		h6 {
			color: #ffc400;
		}

		p,
		li,
		span {
			color: #e8e8e8;
		}

		code {
			background: #1a1a1a;
			color: #ffd740;
			border-color: #383838;
		}

		pre {
			background: #1a1a1a;
			border-color: #383838;

			code {
				color: #d0d0d0;
			}
		}

		blockquote {
			background: #1a1a1a;
			border-left-color: #ffc400;
			color: #d0d0d0;
		}

		a {
			color: #ffd740;

			&:hover {
				color: #ffc400;
			}
		}
	}

	// Blog dark mode styles
	.blog-page {
		.blog-card mat-card {
			background: #242424;
			border-color: #383838;
			box-shadow: 0 4px 24px rgba(0, 0, 0, 0.4);
		}

		.blog-card:hover mat-card {
			box-shadow: 0 8px 32px rgba(255, 196, 0, 0.3);
			border-color: #ffc400;
		}

		mat-card-title {
			color: #ffc400;
		}

		mat-card-content {
			color: #d0d0d0;
		}
	}

	// Blog article card dark mode
	.blog-article-card mat-card {
		background: #242424;
		border-color: #383838;
		box-shadow: 0 4px 24px rgba(0, 0, 0, 0.4);

		&:hover {
			box-shadow: 0 8px 32px rgba(255, 196, 0, 0.3);
			border-color: #ffc400;
		}
	}
}

:root {
	@include mat.snack-bar-overrides(
		(
			supporting-text-size: 1.2rem,
			supporting-text-weight: 400,
			supporting-text-line-height: 1.5rem,
			container-shape: 0.8rem,
		)
	);
}

// Reset et styles de base
html {
	min-height: 100%;
	overflow-x: hidden;
	max-width: 100%;
	scroll-behavior: smooth;
}

body {
	min-height: 100%;
	overflow-x: hidden;
	max-width: 100%;
	margin: 0;
	font-family: 'Lato', sans-serif;
	background: var(--mat-sys-surface);
	color: var(--mat-sys-on-surface);
	position: relative;
}

// Classes utilitaires pour le design épuré
.container {
	max-width: 1200px;
	margin: 0 auto;
	padding: 2rem;
}

.text-center {
	text-align: center;
}
.mb-2 {
	margin-bottom: 1rem;
}
.mb-4 {
	margin-bottom: 2rem;
}
.mt-4 {
	margin-top: 2rem;
}

// Style spécifique pour les titres
h1,
h2,
h3 {
	color: var(--mat-sys-primary);
	letter-spacing: -0.5px;
}

.list {
	list-style-type: none;
	padding: 0;
	margin: 16px 0;
}

.list-item {
	padding: 8px 0;
	display: flex;
	align-items: center;

	&::before {
		content: '•';
		color: var(--mat-sys-primary);
		margin-right: 16px;
		font-size: 1.2em;
	}
}

/* Remove per-target fragment offset since fragments are no longer used */
.service-category-card {
	scroll-margin-top: initial;
}

// Button animations
button,
.mat-mdc-button,
.mat-mdc-raised-button,
.mat-mdc-flat-button,
.mat-mdc-stroked-button {
	transition: all 0.1s cubic-bezier(0.3, 0, 0.1, 1);
	position: relative;
	overflow: hidden;

	&:hover {
		transform: translateY(-2px);
		box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
	}

	&:active {
		transform: translateY(0);
		box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
	}
}

// Scroll animations
.animate-scroll {
	transition:
		opacity 0.6s ease,
		transform 0.6s ease;

	&.animate-fade {
		opacity: 0;
	}

	&.animate-slide-up {
		opacity: 0;
		transform: translateY(30px);
	}

	&.animate-slide-left {
		opacity: 0;
		transform: translateX(30px);
	}

	&.animate-slide-right {
		opacity: 0;
		transform: translateX(-30px);
	}

	&.animate-zoom {
		opacity: 0;
		transform: scale(0.95);
	}

	&.visible {
		opacity: 1;
		transform: translateY(0) translateX(0) scale(1);
	}
}

// Text animations (slower)
.animate-text {
	transition:
		opacity 1.2s ease-out,
		transform 1.2s ease-out;

	&.animate-text-fade {
		opacity: 0;
	}

	&.animate-text-slide-up {
		opacity: 0;
		transform: translateY(20px);
	}

	&.animate-text-slide-left {
		opacity: 0;
		transform: translateX(20px);
	}

	&.animate-text-slide-right {
		opacity: 0;
		transform: translateX(-20px);
	}

	&.visible {
		opacity: 1;
		transform: translateY(0) translateX(0);
	}
}

@media (max-width: 768px) {
	.service-category-card {
		scroll-margin-top: initial;
	}

	// Disable button hover effects on touch devices
	button,
	.mat-mdc-button,
	.mat-mdc-raised-button,
	.mat-mdc-flat-button,
	.mat-mdc-stroked-button {
		&:hover {
			transform: none;
			box-shadow: none;

			&::before {
				width: 0;
				height: 0;
			}
		}
	}
}
